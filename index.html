<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Truck Fridays</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind to use Inter font -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <style>
        /* Custom styles for the calendar */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(0, 1fr));
        }
        .calendar-day {
            min-height: 120px;
        }
        .calendar-day-header {
            font-size: 0.875rem;
            font-weight: 600;
            color: #4A5568;
        }
        /* Ensure modal is on top */
        #modal-view {
            z-index: 50;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl sm:text-3xl font-bold text-indigo-600">FoodTruckFridays</h1>
            <!-- Profile Icon Placeholder -->
            <div>
                <svg class="w-8 h-8 sm:w-10 sm:h-10 text-gray-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
            </div>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="container mx-auto p-4 sm:p-6">

        <!-- 
          PAGE 1: HOME VIEW (Default Visible)
        -->
        <div id="home-view">
            <div classs="max-w-4xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6">
                    <!-- View Calendar Button -->
                    <button id="view-calendar-btn" class="nav-button h-48 sm:h-64 flex items-center justify-center text-2xl font-semibold bg-white rounded-2xl shadow-lg text-gray-800 hover:bg-indigo-50 hover:shadow-xl transition-all duration-300">
                        View Calendar
                    </button>
                    
                    <!-- Share Story Button (Placeholder) -->
                    <button class="nav-button h-48 sm:h-64 flex items-center justify-center text-2xl font-semibold bg-white rounded-2xl shadow-lg text-gray-800 hover:bg-indigo-50 hover:shadow-xl transition-all duration-300 opacity-60 cursor-not-allowed" disabled>
                        Share Story
                    </button>
                    
                    <!-- Join Group Button (Placeholder) -->
                    <button class="nav-button h-48 sm:h-64 flex items-center justify-center text-2xl font-semibold bg-white rounded-2xl shadow-lg text-gray-800 hover:bg-indigo-50 hover:shadow-xl transition-all duration-300 opacity-60 cursor-not-allowed" disabled>
                        Join Group
                    </button>
                </div>
            </div>
        </div>

        <!-- 
          PAGE 2: CALENDAR VIEW (Hidden by default)
        -->
        <div id="calendar-view" class="hidden">
            <div class="max-w-6xl mx-auto">
                <!-- Back Button -->
                <button id="back-to-home-btn" class="mb-4 text-indigo-600 hover:text-indigo-800 font-medium">
                    &larr; Back to Home
                </button>
                
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <!-- Calendar Header -->
                    <div class="flex justify-between items-center p-4 sm:p-6 border-b">
                        <button id="prev-month-btn" class="text-indigo-500 hover:text-indigo-700">&larr;</button>
                        <h2 id="calendar-month-year" class="text-xl sm:text-2xl font-bold text-gray-800 text-center"></h2>
                        <button id="next-month-btn" class="text-indigo-500 hover:text-indigo-700">&rarr;</button>
                    </div>
                    
                    <!-- Calendar Grid -->
                    <div>
                        <!-- Day of Week Headers -->
                        <div class="calendar-grid border-b">
                            <div class="p-2 text-center calendar-day-header">S</div>
                            <div class="p-2 text-center calendar-day-header">M</div>
                            <div class="p-2 text-center calendar-day-header">T</div>
                            <div class="p-2 text-center calendar-day-header">W</div>
                            <div class="p-2 text-center calendar-day-header">T</div>
                            <div class="p-2 text-center calendar-day-header">F</div>
                            <div class="p-2 text-center calendar-day-header">S</div>
                        </div>
                        <!-- Days Grid (will be populated by JS) -->
                        <div id="calendar-days-grid" class="calendar-grid">
                            <!-- Day cells will be generated here -->
                        </div>
                    </div>
                </div>
                <p class="text-center text-gray-600 mt-4">Click on any flag to learn more about the culture behind the food.</p>
            </div>
        </div>

    </main>
    
    <!-- 
      MODAL VIEW: CUISINE DETAILS (Hidden by default)
    -->
    <div id="modal-view" class="hidden fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="p-4 sm:p-6 border-b flex justify-between items-center">
                <h3 id="modal-title" class="text-2xl font-bold text-gray-800"></h3>
                <button id="modal-close-btn" class="text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-4 sm:p-6">
                <div class="md:flex md:gap-6">
                    <!-- Text Content -->
                    <div class="md:w-2/3">
                        <p id="modal-description" class="text-gray-700 text-base mb-4"></p>
                        <a id="modal-link" href="#" target="_blank" class="text-indigo-600 hover:text-indigo-800 font-medium">Learn more &rarr;</a>
                    </div>
                    <!-- Images -->
                    <div class="md:w-1/3 mt-4 md:mt-0 space-y-4">
                        <img id="modal-img-1" src="https://placehold.co/300x200/E2E8F0/4A5568?text=Food+Photo+1" alt="Food photo" class="rounded-lg shadow-md w-full object-cover">
                        <img id="modal-img-2" src="https://placehold.co/300x200/E2E8F0/4A5568?text=Food+Photo+2" alt="Food photo" class="rounded-lg shadow-md w-full object-cover">
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- our fake data ---
        // this is all the info for our food trucks
        // we'll eventually load this from a database, but for now, it lives here
        // we added the 'cuisineinfo' for the popup modal
        const foodTruckSchedule = {
            "2025-10-03": {
                truckName: "Teo Taco",
                location: "123 Dallas St",
                time: "5 PM - 9 PM",
                flag: "ðŸ‡²ðŸ‡½",
                cuisineInfo: {
                    name: "Mexican Cuisine",
                    description: "Rooted in Mayan and Aztec traditions, Mexican cuisine is a vibrant blend of indigenous and Spanish flavors. It's famous for its complex sauces (moles), fresh ingredients like corn, beans, and chili peppers, and its communal approach to eating.",
                    link: "https://en.wikipedia.org/wiki/Mexican_cuisine",
                    img1: "https://placehold.co/300x200/006847/FFFFFF?text=Tacos",
                    img2: "https://placehold.co/300x200/CE1126/FFFFFF?text=Enchiladas"
                }
            },
            "2025-10-10": {
                truckName: "Pizza & Pasta",
                location: "321 Sunny St",
                time: "11 AM - 2 PM",
                flag: "ðŸ‡®ðŸ‡¹",
                cuisineInfo: {
                    name: "Italian Cuisine",
                    description: "Italian food is characterized by its simplicity, with many dishes having only a few high-quality ingredients. It's a celebration of regional diversity, from the rich pastas of the north to the sun-baked pizzas and seafood of the south.",
                    link: "https://en.wikipedia.org/wiki/Italian_cuisine",
                    img1: "https://placehold.co/300x200/008C45/FFFFFF?text=Pasta",
                    img2: "https://placehold.co/300x200/CD212A/FFFFFF?text=Pizza"
                }
            },
            "2025-10-17": {
                truckName: "Panda Potstickers",
                location: "457 Shady Rd",
                time: "5 PM - 9 PM",
                flag: "ðŸ‡¨ðŸ‡³",
                cuisineInfo: {
                    name: "Chinese Cuisine",
                    description: "With thousands of years of history, Chinese cuisine is incredibly diverse. It balances the five key flavors: sweet, sour, salty, bitter, and spicy. Dumplings, like potstickers, are a beloved part of celebrations, symbolizing wealth and togetherness.",
                    link: "https://en.wikipedia.org/wiki/Chinese_cuisine",
                    img1: "https://placehold.co/300x200/EE1C25/FFFFFF?text=Dumplings",
                    img2: "https://placehold.co/300x200/FFFF00/000000?text=Noodles"
                }
            },
            "2025-10-24": {
                truckName: "Halal Heaven",
                location: "842 Trinity Rd",
                time: "5 PM - 9 PM",
                flag: "ðŸ‡µðŸ‡°",
                cuisineInfo: {
                    name: "Pakistani Cuisine",
                    description: "Pakistani food is rich with aromatic spices and herbs. It features a blend of influences from South Asia and the Middle East. Signature dishes often include slow-cooked meats, flavorful curries, and fragrant biryanis, all prepared according to Halal traditions.",
                    link: "https://en.wikipedia.org/wiki/Pakistani_cuisine",
                    img1: "https://placehold.co/300x200/006600/FFFFFF?text=Biryani",
                    img2: "https://placehold.co/300x200/FFFFFF/000000?text=Kebab"
                }
            },
            "2025-10-31": {
                truckName: "Kim's Kimchi",
                location: "987 Smith Dr",
                time: "11 AM - 2 PM",
                flag: "ðŸ‡°ðŸ‡·",
                cuisineInfo: {
                    name: "Korean Cuisine",
                    description: "Korean cuisine is known for its bold, spicy, and savory flavors. Fermented foods like kimchi are a staple at every meal. Barbecue (gogi-gui) and shared side dishes (banchan) highlight the communal and interactive nature of Korean dining.",
                    link: "https://en.wikipedia.org/wiki/Korean_cuisine",
                    img1: "https://placehold.co/300x200/CD2E3A/FFFFFF?text=Kimchi",
                    img2: "https://placehold.co/300x200/0047A0/FFFFFF?text=Bibimbap"
                }
            },
            "2025-11-07": {
                truckName: "La Vita Ã¨ Bella",
                location: "Tech Park Courtyard",
                time: "11:30 AM - 2:30 PM",
                flag: "ðŸ‡®ðŸ‡¹",
                 cuisineInfo: {
                    name: "Italian Cuisine",
                    description: "Italian food is characterized by its simplicity, with many dishes having only a few high-quality ingredients. It's a celebration of regional diversity, from the rich pastas of the north to the sun-baked pizzas and seafood of the south.",
                    link: "https://en.wikipedia.org/wiki/Italian_cuisine",
                    img1: "https://placehold.co/300x200/008C45/FFFFFF?text=Pasta",
                    img2: "https://placehold.co/300x200/CD212A/FFFFFF?text=Pizza"
                }
            },
            "2025-11-14": {
                truckName: "Tokyo Drift Tastes",
                location: "Main Plaza (East Side)",
                time: "11:00 AM - 2:00 PM",
                flag: "ðŸ‡¯ðŸ‡µ",
                cuisineInfo: {
                    name: "Japanese Cuisine",
                    description: "Japanese cuisine is based on 'washoku', or harmony in food. It emphasizes seasonality, quality of ingredients, and presentation. From delicate sushi to savory ramen, it respects the natural flavors of each component.",
                    link: "https://en.wikipedia.org/wiki/Japanese_cuisine",
                    img1: "https://placehold.co/300x200/BC002D/FFFFFF?text=Sushi",
                    img2: "https://placehold.co/300x200/FFFFFF/000000?text=Ramen"
                }
            }
        };

        // --- app state ---
        // this just keeps track of what month we're looking at
        let currentDisplayDate = new Date();
        // let's set the calendar to october 2025 so it matches the screenshot
        currentDisplayDate = new Date(2025, 9, 1); 

        // --- dom elements ---
        // here we're just grabbing all the html parts we need to work with
        // we declare them here, but we'll assign them *after* the dom loads
        let views = {};
        let calendarGrid;
        let calendarTitle;
        let modalTitle;
        let modalDescription;
        let modalLink;
        let modalImg1;
        let modalImg2;

        // --- navigation functions ---
        
        /**
         * hides all views and shows just the one we want
         * @param {string} viewname - 'home' or 'calendar'
         */
        function showView(viewName) {
            // first, hide everything
            Object.values(views).forEach(view => {
                if (view) view.classList.add('hidden');
            });
            // then, show the one we asked for (as long as it's not the modal)
            if (views[viewName] && viewName !== 'modal') {
                views[viewName].classList.remove('hidden');
            }
        }

        // simple functions to show or hide the modal
        function showModal() { 
            if (views.modal) views.modal.classList.remove('hidden'); 
        }
        function hideModal() { 
            if (views.modal) views.modal.classList.add('hidden'); 
        }

        // --- calendar logic ---

        /**
         * builds and displays the calendar for a given month and year
         * @param {number} year - the full year (e.g., 2025)
         * @param {number} month - the month (0-indexed, 0=jan)
         */
        function buildCalendar(year, month) {
            // exit if the calendar grid element isn't ready yet
            if (!calendarGrid) {
                console.error("calendarGrid is not initialized.");
                return;
            }
            
            // clear out the old calendar days before we build new ones
            calendarGrid.innerHTML = '';
            
            // set the "october 2025" title
            const monthName = new Date(year, month).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            calendarTitle.textContent = monthName.toUpperCase();

            // get all the info we need to build the month grid
            const firstDay = new Date(year, month, 1).getDay(); // 0=sun, 1=mon...
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // 1. create empty cells for the days before the 1st
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = "calendar-day border-b border-r bg-gray-50";
                calendarGrid.appendChild(emptyCell);
            }

            // 2. create cells for each day of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = "calendar-day border-b border-r p-2";
                
                const currentDate = new Date(year, month, day);
                const dayOfWeek = currentDate.getDay(); // 5 = friday
                
                // add the day number (1, 2, 3...)
                const dayNumber = document.createElement('div');
                dayNumber.className = "text-sm font-semibold text-gray-700";
                dayNumber.textContent = day;
                dayCell.appendChild(dayNumber);
                
                // check if it's a friday
                if (dayOfWeek === 5) {
                    // format the date like "2025-10-31" to match our data
                    const dateString = currentDate.toISOString().split('T')[0];
                    const eventData = foodTruckSchedule[dateString];
                    
                    if (eventData) {
                        // we have an event! let's create the info box
                        const eventDiv = document.createElement('div');
                        eventDiv.className = "mt-1 text-xs";
                        
                        const truckName = document.createElement('p');
                        truckName.className = "font-bold text-gray-900";
                        truckName.textContent = eventData.truckName;
                        
                        const flag = document.createElement('button');
                        flag.className = "text-lg hover:opacity-75 transition-opacity";
                        flag.textContent = eventData.flag;
                        // add a click listener to show the modal with this event's info
                        flag.addEventListener('click', () => {
                            populateAndShowModal(eventData);
                        });

                        const location = document.createElement('p');
                        location.className = "text-gray-600";
                        location.textContent = eventData.location;

                        const time = document.createElement('p');
                        time.className = "text-gray-600";
                        time.textContent = eventData.time;

                        eventDiv.appendChild(truckName);
                        eventDiv.appendChild(flag);
                        eventDiv.appendChild(location);
                        eventDiv.appendChild(time);
                        dayCell.appendChild(eventDiv);
                    }
                }
                
                calendarGrid.appendChild(dayCell);
            }
        }
        
        /**
         * fills the modal with event data and shows it
         * @param {object} eventdata - the event object from foodtruckschedule
         */
        function populateAndShowModal(eventData) {
            const info = eventData.cuisineInfo;
            // check if modal elements are ready before trying to set them
            if (modalTitle) modalTitle.textContent = info.name;
            if (modalDescription) modalDescription.textContent = info.description;
            if (modalLink) modalLink.href = info.link;
            if (modalImg1) modalImg1.src = info.img1;
            if (modalImg2) modalImg2.src = info.img2;
            
            // just in case the images don't load, show a placeholder
            if (modalImg1) modalImg1.onerror = () => { modalImg1.src = 'https://placehold.co/300x200/E2E8F0/4A5568?text=Food+Photo'; };
            if (modalImg2) modalImg2.onerror = () => { modalImg2.src = 'https://placehold.co/300x200/E2E8F0/4A5568?text=Food+Photo'; };

            showModal();
        }

        // --- initial app setup ---
        // this runs once all the html is loaded
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- assign dom elements ---
            // now that the dom is loaded, we can safely grab our elements
            views = {
                home: document.getElementById('home-view'),
                calendar: document.getElementById('calendar-view'),
                modal: document.getElementById('modal-view')
            };
            calendarGrid = document.getElementById('calendar-days-grid');
            calendarTitle = document.getElementById('calendar-month-year');
            modalTitle = document.getElementById('modal-title');
            modalDescription = document.getElementById('modal-description');
            modalLink = document.getElementById('modal-link');
            modalImg1 = document.getElementById('modal-img-1');
            modalImg2 = document.getElementById('modal-img-2');

            // build the calendar for the first time
            // now calendarGrid will be a valid element
            buildCalendar(currentDisplayDate.getFullYear(), currentDisplayDate.getMonth());

            // --- navigation event listeners ---
            // set up all our buttons
            
            // home -> calendar
            document.getElementById('view-calendar-btn').addEventListener('click', () => {
                showView('calendar');
            });

            // calendar -> home
            document.getElementById('back-to-home-btn').addEventListener('click', () => {
                showView('home');
            });
            
            // modal close button
            document.getElementById('modal-close-btn').addEventListener('click', hideModal);
            
            // let's also close the modal if you click the dark background
            if (views.modal) {
                views.modal.addEventListener('click', (e) => {
                    if (e.target === views.modal) {
                        hideModal();
                    }
                });
            }

            // calendar month navigation
            document.getElementById('prev-month-btn').addEventListener('click', () => {
                currentDisplayDate.setMonth(currentDisplayDate.getMonth() - 1);
                buildCalendar(currentDisplayDate.getFullYear(), currentDisplayDate.getMonth());
            });

            document.getElementById('next-month-btn').addEventListener('click', () => {
                currentDisplayDate.setMonth(currentDisplayDate.getMonth() + 1);
                buildCalendar(currentDisplayDate.getFullYear(), currentDisplayDate.getMonth());
            });

        });

    </script>

</body>
</html>
